<!DOCTYPE html>
<html>
<head>
  <title>データ取得サイト</title>
</head>
<body>

  <h1>質問データ取得</h1>

  <button id="get">データ取得</button>

  <ul id="questions"></ul>

</body>

<script>

// 質問箱サイトのFirebaseデータベース設定
const config = {
  apiKey: "AIzaSyDT5SdSajGPPTzgyZb-XO4xabAY6B0bewI",
  authDomain: "hamanan-10983.firebaseapp.com",
  databaseURL: "https://hamanan-10983-default-rtdb.firebaseio.com",
  projectId: "hamanan-10983",
  storageBucket: "hamanan-10983.appspot.com",
  messagingSenderId: "181655797156",
  appId: "1:181655797156:web:f1025f6db4772ba3539531"};

// Firebaseアプリ初期化
const app = firebase.initializeApp(config);
const db = app.database();
const questionsRef = db.ref('questions');

// データ取得ボタンにクリックイベント
document.getElementById('get').addEventListener('click', () => {

  // 質問データ全てを取得
  questionsRef.once('value').then(snapshot => {

    // 取得データをリストに表示
    const questions = snapshot.val();
    const list = document.getElementById('questions');
    list.innerHTML = '';
    for (let id in questions) {
      const q = questions[id];
      const item = document.createElement('li');
      item.textContent = q.name + ': ' + q.question;
      list.appendChild(item);
    }

  });

});

</script>
</html>
